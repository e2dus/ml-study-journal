<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="page-title">ğŸ“ | ML Study Journal</title>
    <meta name="description" id="page-desc" content="" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“</text></svg>" />
    <style>
        .post-container {
            max-width: 760px;
            margin: 0 auto;
            padding: 100px 2rem 5rem;
            position: relative;
            z-index: 1;
        }

        .post-back {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 2.5rem;
            transition: var(--transition);
        }

        .post-back:hover {
            color: var(--accent-blue);
        }

        .post-header {
            margin-bottom: 2.5rem;
        }

        .post-meta-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 1.25rem;
            flex-wrap: wrap;
        }

        .post-category-badge {
            font-size: 0.72rem;
            font-weight: 700;
            padding: 4px 12px;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.06em;
        }

        .post-date-badge {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .post-read-badge {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .post-title-main {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 800;
            line-height: 1.2;
            letter-spacing: -0.02em;
            margin-bottom: 1rem;
        }

        .post-excerpt-main {
            font-size: 1.05rem;
            color: var(--text-secondary);
            line-height: 1.7;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        /* Post Content */
        .post-body {
            font-size: 0.975rem;
            line-height: 1.85;
            color: var(--text-secondary);
        }

        .post-body h1 {
            font-size: 1.7rem;
            font-weight: 800;
            color: var(--text-primary);
            margin: 2.5rem 0 1rem;
        }

        .post-body h2 {
            font-size: 1.35rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 2rem 0 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .post-body h3 {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 1.5rem 0 0.5rem;
        }

        .post-body p {
            margin-bottom: 1rem;
        }

        .post-body code {
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            background: rgba(255, 255, 255, 0.07);
            padding: 2px 7px;
            border-radius: 5px;
            color: var(--accent-cyan);
        }

        .post-body pre {
            background: rgba(0, 0, 0, 0.35);
            border: 1px solid var(--border);
            border-left: 3px solid var(--accent-purple);
            border-radius: var(--radius-sm);
            padding: 1.25rem 1.5rem;
            overflow-x: auto;
            margin: 1.25rem 0;
            position: relative;
        }

        .post-body pre code {
            background: none;
            padding: 0;
            color: var(--accent-green);
            font-size: 0.875rem;
            line-height: 1.65;
        }

        .post-body ul,
        .post-body ol {
            padding-left: 1.75rem;
            margin-bottom: 1rem;
        }

        .post-body li {
            margin-bottom: 0.4rem;
        }

        .post-body blockquote {
            border-left: 3px solid var(--accent-purple);
            padding: 0.75rem 1.25rem;
            margin: 1.25rem 0;
            color: var(--text-muted);
            font-style: italic;
            background: rgba(159, 122, 234, 0.05);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        .post-body table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.25rem 0;
            font-size: 0.875rem;
        }

        .post-body th {
            background: rgba(255, 255, 255, 0.06);
            padding: 10px 14px;
            text-align: left;
            font-weight: 700;
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .post-body td {
            padding: 9px 14px;
            border: 1px solid var(--border);
        }

        .post-body strong {
            color: var(--text-primary);
            font-weight: 700;
        }

        .post-body a {
            color: var(--accent-blue);
            text-decoration: underline;
        }

        .post-body hr {
            border: none;
            border-top: 1px solid var(--border);
            margin: 2rem 0;
        }

        .post-body img {
            max-width: 100%;
            border-radius: var(--radius-sm);
        }

        /* Post Footer */
        .post-footer {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: gap;
            gap: 1rem;
        }

        .share-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .share-btn:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        /* TOC */
        .toc {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 1.25rem 1.5rem;
            margin-bottom: 2rem;
        }

        .toc-title {
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
        }

        .toc ul {
            padding-left: 0;
            list-style: none;
        }

        .toc li {
            margin-bottom: 0.4rem;
        }

        .toc a {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
        }

        .toc a:hover {
            color: var(--accent-blue);
        }

        .toc .toc-h3 {
            padding-left: 1rem;
        }

        /* Not found */
        .not-found {
            text-align: center;
            padding: 4rem 2rem;
        }

        .not-found h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .not-found p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }
    </style>
</head>

<body>
    <canvas id="bg-canvas"></canvas>

    <!-- Navbar -->
    <nav class="navbar">
        <a href="index.html" class="nav-logo">
            <div class="nav-logo-icon">ğŸ§ </div>
            <span class="nav-logo-text">ML Journal</span>
        </a>
        <ul class="nav-links" id="nav-links">
            <li><a href="index.html#topics">í•™ìŠµ ì£¼ì œ</a></li>
            <li><a href="index.html#notes">í•™ìŠµ ë…¸íŠ¸</a></li>
            <li><a href="write.html">âœï¸ ê¸€ì“°ê¸°</a></li>
            <li><a href="index.html#about">ì†Œê°œ</a></li>
        </ul>
        <button class="hamburger" id="hamburger" aria-label="ë©”ë‰´">
            <span></span><span></span><span></span>
        </button>
    </nav>

    <div class="post-container" id="post-container">
        <!-- Content injected by JS -->
    </div>

    <script src="posts.js"></script>
    <script src="script.js"></script>
    <script>
        // ===========================
        // Post Page Logic
        // ===========================

        function parseMarkdownPost(md) {
            if (!md) return '';
            let html = md
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');

            // Fenced code blocks
            html = html.replace(/```(\w*)\n([\s\S]*?)```/g, (_, lang, code) => {
                return `<pre><code class="lang-${lang}">${code.trim()}</code></pre>`;
            });

            // Inline code
            html = html.replace(/`([^`]+)`/g, '<code>$1</code>');

            // Headers
            html = html.replace(/^### (.+)$/gm, '<h3 id="$1">$1</h3>');
            html = html.replace(/^## (.+)$/gm, '<h2 id="$1">$1</h2>');
            html = html.replace(/^# (.+)$/gm, '<h1 id="$1">$1</h1>');

            // HR
            html = html.replace(/^---$/gm, '<hr>');

            // Bold/Italic
            html = html.replace(/\*\*\*(.+?)\*\*\*/g, '<strong><em>$1</em></strong>');
            html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/\*(.+?)\*/g, '<em>$1</em>');

            // Blockquote
            html = html.replace(/^&gt; (.+)$/gm, '<blockquote>$1</blockquote>');

            // Tables
            html = html.replace(/^\|(.+)\|$/gm, (match) => {
                const cells = match.split('|').filter((c, i, arr) => i > 0 && i < arr.length - 1);
                return '<tr>' + cells.map(c => `<td>${c.trim()}</td>`).join('') + '</tr>';
            });
            html = html.replace(/(<tr>.*?<\/tr>\n?)+/g, (block) => {
                const rows = block.trim().split('\n').filter(r => !r.match(/^<tr>(<td>[\s\-: |]+<\/td>)+<\/tr>$/));
                if (!rows.length) return '';
                const header = '<thead>' + rows[0].replace(/<td>/g, '<th>').replace(/<\/td>/g, '</th>') + '</thead>';
                const body = rows.slice(1).length ? '<tbody>' + rows.slice(1).join('') + '</tbody>' : '';
                return '<table>' + header + body + '</table>';
            });

            // Lists
            html = html.replace(/(^- .+\n?)+/gm, (block) => {
                const items = block.trim().split('\n').map(l => `<li>${l.replace(/^- /, '')}</li>`).join('');
                return '<ul>' + items + '</ul>';
            });
            html = html.replace(/(^\d+\. .+\n?)+/gm, (block) => {
                const items = block.trim().split('\n').map(l => `<li>${l.replace(/^\d+\. /, '')}</li>`).join('');
                return '<ol>' + items + '</ol>';
            });

            // Links
            html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');

            // Paragraphs
            const lines = html.split('\n');
            const result = [];
            for (let line of lines) {
                const t = line.trim();
                if (!t) continue;
                if (/^<(h[1-6]|ul|ol|li|pre|table|thead|tbody|tr|th|td|blockquote|hr|div)/.test(t)) {
                    result.push(t);
                } else {
                    result.push('<p>' + t + '</p>');
                }
            }
            return result.join('\n');
        }

        function getCategoryColorClass(color) {
            const map = {
                blue: 'tag-blue', purple: 'tag-purple', orange: 'tag-orange',
                green: 'tag-green', cyan: 'tag-cyan', pink: 'tag-pink'
            };
            return map[color] || 'tag-blue';
        }

        function formatDate(d) {
            const date = new Date(d);
            return date.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        function buildTOC(content) {
            const headings = [...content.matchAll(/<h([23]) id="([^"]+)">([^<]+)<\/h[23]>/g)];
            if (headings.length < 2) return '';
            const items = headings.map(([_, level, id, text]) => {
                const cls = level === '3' ? ' class="toc-h3"' : '';
                return `<li${cls}><a href="#${encodeURIComponent(id)}">Â§ ${text}</a></li>`;
            }).join('');
            return `<div class="toc"><div class="toc-title">ğŸ“‹ ëª©ì°¨</div><ul>${items}</ul></div>`;
        }

        // Get post ID from URL
        const params = new URLSearchParams(window.location.search);
        const postId = params.get('id');
        const container = document.getElementById('post-container');

        if (!postId) {
            container.innerHTML = `<div class="not-found"><h2>í¬ìŠ¤íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš” ğŸ˜¢</h2><p>ì£¼ì†Œê°€ ì˜ëª»ëê±°ë‚˜ ì‚­ì œëœ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.</p><a href="index.html" class="btn-primary">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a></div>`;
        } else {
            const post = POSTS.find(p => p.id === postId);
            if (!post) {
                container.innerHTML = `<div class="not-found"><h2>í¬ìŠ¤íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš” ğŸ˜¢</h2><p>ì£¼ì†Œê°€ ì˜ëª»ëê±°ë‚˜ ì‚­ì œëœ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.</p><a href="index.html" class="btn-primary">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a></div>`;
            } else {
                document.getElementById('page-title').textContent = post.title + ' | ML Study Journal';
                document.getElementById('page-desc').setAttribute('content', post.excerpt);

                const parsed = parseMarkdownPost(post.content);
                const toc = buildTOC(parsed);
                const colorCls = getCategoryColorClass(post.categoryColor);

                container.innerHTML = `
      <a href="index.html#notes" class="post-back">â† í•™ìŠµ ë…¸íŠ¸ ëª©ë¡</a>
      <div class="post-header">
        <div class="post-meta-row">
          <span class="post-category-badge tag ${colorCls}">${post.category}</span>
          <span class="post-date-badge">ğŸ“… ${formatDate(post.date)}</span>
          <span class="post-read-badge">â± ${post.readTime}ë¶„ ì½ê¸°</span>
        </div>
        <h1 class="post-title-main">${post.title}</h1>
        <p class="post-excerpt-main">${post.excerpt}</p>
      </div>
      ${toc}
      <div class="post-body">${parsed}</div>
      <div class="post-footer">
        <a href="index.html#notes" class="post-back" style="margin-bottom:0;">â† ëª©ë¡ìœ¼ë¡œ</a>
        <div style="display:flex;gap:8px;">
          <button class="share-btn" onclick="copyLink()">ğŸ”— ë§í¬ ë³µì‚¬</button>
          <a href="write.html" class="btn-primary" style="font-size:0.875rem; padding:8px 16px;">âœï¸ ê¸€ì“°ê¸°</a>
        </div>
      </div>
    `;
            }
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                const btn = document.querySelector('.share-btn');
                btn.textContent = 'âœ… ë³µì‚¬ë¨!';
                setTimeout(() => btn.textContent = 'ğŸ”— ë§í¬ ë³µì‚¬', 2000);
            });
        }
    </script>
</body>

</html>